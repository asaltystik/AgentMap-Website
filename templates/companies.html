<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" name="Company List" content="List of companies found within the selected state">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Info-Box</title>
</head>
<style>
</style>
<body>
<!-- This is the Header for the info-box-container the current implementation should keep it to be on top of the info-box-contents -->
{% if not forms %}
    <h1 style="margin-top: 1px; margin-bottom: 1px;">There are no forms for {{ state }}</h1>
{% else %}
    <h1 style="margin-top: 1px;
               margin-bottom: 1px;
               border-bottom: 3px black solid;
               padding-left: 5px;
    ">
        {{ state }}
        {% if license_number %}
        <span style="font-size: 20px; {% if is_expiring_soon%}color: crimson;{% endif %}">
            - (License Number: {{ license_number }})
            {%  if expiration|date:"Y" != "2099" %}
                - Expires: {{ expiration|date:"m/d/Y" }}
            {% endif %}
        </span>
        {% endif %}
    </h1>
<div id="{{ state }}" class="info-box-contents" style="font-family: lucida sans unicode,serif;">
    <h2 style="margin-top: 1px; margin-bottom: 1px;">Medicare Supplements: </h2>
    <!-- groups the forms by full_company and stores them in company_list -->
    {% regroup forms by full_company as company_list %}
    <!-- This is the container for the filtered company forms -->
    <div class="new-company-container">
    <!-- this is the loop that will display the forms for each company -->
    {% for full_company in company_list %}
        <!-- Full Company Name -->
        <div class="new-company" id="{{ full_company.grouper }}" style="border: 2px black solid; border-radius: 12px">
            <h2 style="text-align: center">
            <!-- This is the link to the company's e-application -->
                {%  for key, value in app_urls.items %}  <!-- This will loop through the app_urls dictionary -->
                    {% if key == full_company.grouper %} <!-- Checks if the key is equal to the company name -->
                        <!-- Link to the company's e-application -->
                    <a href="https://{{ value }}" target="_blank" title="{{ full_company.grouper }} E-Application &#013;{{ value }}">
                        {{ full_company.grouper }}  <!-- Displays the company name -->
                    </a>
                    {% endif %}
                {% endfor %}
            </h2>
            <!-- This is the button-matrix that will display the forms for the company -->
            <div class="button-matrix">
            {% for form in full_company.list %}
                <div>
                    <!-- This is the button that will open the modal for the form -->
                    <button 
                            id="{{ form.full_form_type }}"
                            style="font-family: 'lucida sans unicode','serif'"
                            _="on click call openModal('{% url 'view_form' form.id %}')"
                            title="{{ full_company.grouper }}&#013;{{ form.full_form_type }}&#013;{% if form.date != "None" %}{{ form.date }}{% endif %}">
                        <!-- This is the non-abbreviated form type -->
                        {{ form.full_form_type }}
                        {% if form.date != "None" %}
                            {{ form.date }}
                        {% endif %}
                    </button>
                </div>
            {% endfor %}
            </div>
        </div>
    {% endfor %}
    </div>
    <!-- This is for the Ancillaries which is not current implemented -->
    {% if ancillaries %}
    <div id="Ancillaries" class="Ancillaries-Container" style="font-family: lucida sans unicode,serif; ">
        <h2>Ancillaries: </h2>
    </div>
    {% endif %}
{% endif %}
</div>
</body>
</html>